# ⛳️Goal:  "나만의 일정 관리 앱 서버 만들기"

## use case diagram
<img width="500" alt="image" src="https://github.com/eunsaemsaem/sparta_spring-personal-schedule/assets/142576710/3a15687d-a060-458c-8a75-38e4597f1735">

## API 명세서
<img width="865" alt="image" src="https://github.com/eunsaemsaem/sparta_spring-personal-schedule/assets/142576710/e7c989e8-f161-4998-9df3-bdb1cc8f7235">

## ERD
<img width="576" alt="image" src="https://github.com/eunsaemsaem/sparta_spring-personal-schedule/assets/142576710/d5337ddf-a67a-4afc-a85b-496b08387b0b">



## 기능 구현

> ### 1단계 : 일정과 댓글의 연관관계
> - 지난 과제에서 만든 일정에 댓글을 추가할 수 있습니다.
> - ERD에도 댓글 모델을 추가합니다.
> - 각 일정에 댓글을 작성할 수 있도록 관련 클래스를 추가하고 연관 관계를 설정합니다.
> - 매핑 관계를 설정합니다. (1:1 or N:1 or N:M)

> ### 2단계 : 댓글 등록
> - 선택한 일정이 있다면 댓글을 등록합니다.
> - 댓글이 등록되었다면 client에게 반환합니다.
> - 선택한 일정이 DB에 저장되어 있어야 합니다.
> - 댓글을 식별하는 `고유번호`, `댓글 내용`, 댓글을 작성한 `사용자 아이디`, 댓글이 작성된 `일정 아이디`, `작성일자`를 저장할 수 있습니다.
> - 선택한 일정의 ID를 입력 받지 않은 경우
> - 댓글 내용이 비어 있는 경우
> - 일정이 DB에 저장되지 않은 경우

> ### 3단계 : 댓글 수정
> - 선택한 일정의 댓글을 수정합니다.
> - 댓글이 수정되었다면 수정된 댓글을 반환합니다.
> - `댓글 내용`만 수정 가능합니다.
> - 선택한 일정과 댓글이 DB에 저장되어 있어야 합니다.

> ### 4단계 : 댓글 삭제
> - 선택한 일정의 댓글을 삭제합니다.
> - 성공했다는 메시지와 상태 코드 반환하기
> - 선택한 일정과 댓글이 DB에 저장되어 있어야 합니다.

> ### 5단계 : JWT
> - 입문주차 개인 과제 일정 기능을 구현하면서 나온 예외처리를 Validation 어노테이션을 활용하여 수정합니다.
> - 2-4 단계에서 구현한 예외처리를 Validation 어노테이션을 활용하여 수정합니다.
> - 로그인을 구현 후 3, 4단계에서 구현한 기능에 아래 기능을 추가합니다.
>    - 해당 사용자가 작성한 댓글만 삭제, 수정할 수 있습니다.
> - JWT를 이용한 인증/인가를 구현한다.
> - 위 1~4 단계에서 인증/인가가 완료된 후에만 기능이 동작하도록 수정한다.
> - Access Token 만료시간 60분
> - Refresh Token 구현은 8단계이므로 이번에는 하지 않습니다.

> ### 6단계 : 회원가입
> - 사용자의 정보를 전달 받아 유저 정보를 저장한다.
> - 패스워드 암호화는 하지 않습니다.
> - `username`은  `최소 4자 이상, 10자 이하이며 알파벳 소문자(a~z), 숫자(0~9)`로 구성되어야 한다.
> - `password`는  `최소 8자 이상, 15자 이하이며 알파벳 대소문자(a~z, A~Z), 숫자(0~9)`로 구성되어야 한다.
> - DB에 중복된 `username`이 없다면 회원을 저장하고 Client 로 성공했다는 메시지, 상태코드 반환하기

> ### 7단계 : 로그인
> - `username`, `password` 정보를 client로부터 전달받아 토큰을 반환한다.
> - DB에서 `username`을 사용하여 저장된 회원의 유무를 확인한다.
>     - 저장된 회원이 있다면 `password` 를 비교하여 로그인 성공 유무를 체크한다.
> - 패스워드 복호화는 하지 않습니다.
> - 로그인 성공 시 로그인에 성공한 유저의 정보와 JWT를 활용하여 토큰을 발급한다.
> - 발급한 토큰을 `Header`에 추가하고 성공했다는 메시지 및 상태코드와 함께 client에 반환한다.
